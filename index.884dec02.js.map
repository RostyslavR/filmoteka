{"mappings":"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","sources":["src/js/refs.js","node_modules/@swc/helpers/lib/_define_property.js","src/index.js","src/js/themoviedb-api.js","src/js/gallery.js","src/js/pagination.js"],"sourcesContent":["export default {\n  gallery: document.querySelector('.main-gallery'),\n  pagination: document.querySelector('.pagination'),\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _defineProperty;\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\n","import refs from './js/refs';\nimport ThemoviedbApi from './js/themoviedb-api';\nimport Gallery from './js/gallery';\nimport Pagination from './js/pagination';\nconst moviedb = new ThemoviedbApi();\nconst gallery = new Gallery(refs.gallery);\nconst pagination = new Pagination(refs.pagination, reNewPage);\n\n// displayMovies();\nrefs.gallery.innerHTML = '<h1>HELLO!</h1>';\n\nasync function displayMovies(page = 1) {\n  const movies = await moviedb.getMovies(page);\n  gallery.render(movies.results);\n  pagination.on(movies.page, movies.total_pages);\n}\n\nfunction reNewPage(page) {\n  displayMovies(page);\n}\n","export default class {\n  BASE_URL = 'https://api.themoviedb.org/3';\n  KEY_API = 'dc4940972c268b026150cf7be6f01d11';\n  ENDPOINT = '/trending/movie/day';\n\n  qOptions = new URLSearchParams({\n    api_key: this.KEY_API,\n    // query: 'xxx',\n    // page: 1,\n  });\n\n  constructor() {}\n\n  async getMovies(page = 1) {\n    this.qOptions.set('page', page);\n    const url = `${this.BASE_URL}${this.ENDPOINT}?${this.qOptions}`;\n    const response = await fetch(url);\n    const data = response.json();\n    return data;\n  }\n}\n","const BASE_URL = 'https://image.tmdb.org/t/p/original';\n\nexport default class {\n  constructor(ref) {\n    this.ref = ref;\n  }\n  render(data) {\n    console.log(data);\n    let markUp = data.reduce((markUp, el) => {\n      if (el.backdrop_path) {\n        markUp += makeMarkUpItem(el);\n      }\n      return markUp;\n    }, '');\n    markUp = `\n    <ul class=\"gallery-list\">\n    ${markUp}\n    </ul>\n    `;\n    this.ref.innerHTML = markUp;\n  }\n}\n\nfunction makeMarkUpItem(movie) {\n  const img = `${BASE_URL}${movie.poster_path}`;\n  const title = movie.title;\n  const genre = movie.genre_ids.map(e => e).join(',');\n  const data = movie.release_date;\n  const rating = movie.vote_average;\n\n  return `\n    <li class=\"gallery-item\">\n    <img class=\"item-img\" src=\"${img}\" alt=\"${title}\" loading=\"lazy\"/>\n    <p class=\"item-title\">${title}</p>\n    <div class=\"item-data\">\n    <p class=\"item-genre\">${genre}</p>\n    <p class=\"item-data\">${data}</p>\n    <p class=\"item-rating\">${rating}</p>\n    </div>\n    </li>\n    `;\n}\n","export default class {\n  constructor(ref, onPage) {\n    this.ref = ref;\n    this.onPage = onPage;\n    this.currentPage = 0;\n    this.totalPages = 0;\n  }\n\n  on(currentPage, totalPages) {\n    this.currentPage = Number(currentPage);\n    this.totalPages = Number(totalPages);\n    this.makeMarkUp();\n    this.ref.addEventListener('click', this.handlePagination);\n  }\n\n  makeMarkUp() {\n    let min = 0;\n    let max = 0;\n    if (this.totalPages > 7) {\n      min =\n        this.currentPage - 2 > 1 ? this.currentPage - 2 : this.currentPage - 1;\n      max =\n        this.currentPage + 2 < this.totalPages\n          ? this.currentPage + 2\n          : this.currentPage + 1;\n    }\n    let markUp = '';\n    for (let i = 1; i <= this.totalPages; i += 1) {\n      if (i === 1 || (i >= min && i <= max) || i === this.totalPages) {\n        if (i !== this.currentPage) {\n          markUp += `<li class=\"pagination-page\" ><a href=\"#\" data-num=\"${i}\">${i}</a></li>`;\n        } else {\n          markUp += `<li class=\"pagination-page current-page\" ><a href=\"#\" data-num=\"${i}\">${i}</a></li>`;\n        }\n      }\n    }\n    markUp = `\n  <ul class=\"pagination-list\">\n  <a href=\"#\" class=\"pagination-page\" data-num=\"prev\"><<</a>\n  ${markUp}\n  <a href=\"#\" class=\"pagination-page\" data-num=\"next\">>></a>\n  </ul>\n  `;\n    this.ref.innerHTML = markUp;\n  }\n\n  handlePagination = evt => {\n    if (evt.target.nodeName !== 'A') {\n      return;\n    }\n    this.ref.removeEventListener('click', this.handlePagination);\n    switch (evt.target.dataset.num) {\n      case 'prev':\n        this.currentPage > 1 ? (this.currentPage -= 1) : this.currentPage;\n        break;\n      case 'next':\n        this.currentPage < this.totalPages\n          ? (this.currentPage += 1)\n          : this.currentPage;\n        break;\n      default:\n        this.currentPage = Number(evt.target.dataset.num);\n    }\n    this.onPage(this.currentPage);\n  };\n}\n"],"names":["$ee27a4d7c64fc8c4$export$2e2bcd8739ae039","gallery","document","querySelector","pagination","Object","defineProperty","$da4b248c00322402$exports","value","default","obj","key","enumerable","configurable","writable","$1f0dc3b9307be026$var$moviedb","async","page","this","qOptions","set","url","BASE_URL","ENDPOINT","fetch","json","constructor","$parcel$interopDefault","URLSearchParams","api_key","KEY_API","$1f0dc3b9307be026$var$gallery","render","data","console","log","markUp1","reduce","markUp","el","backdrop_path","movie","img","poster_path","title","genre","genre_ids","map","e","join","release_date","rating","vote_average","$7c59f4ec4043ce00$var$makeMarkUpItem","ref","innerHTML","$1f0dc3b9307be026$var$pagination","on","currentPage","totalPages","Number","makeMarkUp","addEventListener","handlePagination","min","max","i","onPage","evt","target","nodeName","removeEventListener","dataset","num","movies","getMovies","results","total_pages","$1f0dc3b9307be026$var$displayMovies"],"version":3,"file":"index.884dec02.js.map"}